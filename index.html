<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>å¡¾è¬›å¸«ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚²ãƒ¼ãƒ </title>
<style>
body {
    font-family: sans-serif;
    background: #eef6ff;
    padding: 20px;
}
#game {
    background: #fff;
    padding: 20px;
    border-radius: 10px;
    width: 600px;
    margin: auto;
    box-shadow: 0 0 10px #aaa;
}
.card {
    background: #f0f8ff;
    padding: 10px;
    border-radius: 10px;
    margin: 10px 0;
    cursor: pointer;
    border: 2px solid #bcd;
}
.card:hover {
    background: #dff;
}
</style>
</head>
<body>

<div id="game">
    <h1>å¡¾è¬›å¸«ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</h1>
    <div id="status"></div>
    <div id="eventArea"></div>
    <button id="nextTurnBtn">æ¬¡ã®ã‚¿ãƒ¼ãƒ³ã¸</button>
</div>

<script>
// -------------------------------
// ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
// -------------------------------
let turn = 1;
let seasonIndex = 0;
const seasons = ["æ˜¥", "å¤", "ç§‹", "å†¬"];

// ç”Ÿå¾’ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆç”Ÿå¾’åï¼šã”ã†ãã‚“ï¼‰
let student = {
    name: "ã”ã†ãã‚“",
    score: 50,
    motivation: 50,
    bond: 30
};

// -------------------------------
// ã‚¤ãƒ™ãƒ³ãƒˆã‚¬ãƒãƒ£ï¼ˆãƒ©ãƒ³ãƒ€ãƒ ï¼‰
// -------------------------------
const events = [
    { 
        name: "å®šæœŸãƒ†ã‚¹ãƒˆç›´å‰ï¼",
        cards: [
            { title: "ãƒ†ã‚¹ãƒˆå¯¾ç­–ã‚’å¼·åŒ–ã™ã‚‹", effect: { score: +10, motivation: -5 } },
            { title: "ä¼‘æ†©ã‚’ææ¡ˆã™ã‚‹", effect: { motivation: +10, score: -3 } }
        ]
    },
    {
        name: "ã”ã†ãã‚“ãŒæ‚©ã‚“ã§ã„ã‚‹â€¦",
        cards: [
            { title: "æ‚©ã¿ç›¸è«‡ã‚’è¡Œã†", effect: { bond: +15, motivation: +5 } },
            { title: "æˆæ¥­ã‚’é€²ã‚ã‚‹", effect: { score: +7 } }
        ]
    },
    {
        name: "ä¿è­·è€…é¢è«‡ï¼ˆã”ã†ãã‚“ã®ä¿è­·è€…ï¼‰",
        cards: [
            { title: "ä¸å¯§ã«çŠ¶æ³èª¬æ˜", effect: { bond: +10 } },
            { title: "çµæœã‚’å¼·èª¿ã™ã‚‹", effect: { score: +8, bond: -5 } }
        ]
    }
];

// -------------------------------
// ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°è¡¨ç¤º
// -------------------------------
function updateStatus() {
    const s = seasons[seasonIndex];
    document.getElementById("status").innerHTML =
        `<h3>ã‚¿ãƒ¼ãƒ³ï¼š${turn}ï¼ˆå­£ç¯€ï¼š${s}ï¼‰</h3>
         <strong>ç”Ÿå¾’ï¼š${student.name}</strong><br>
         æˆç¸¾ï¼š${student.score}<br>
         ã‚„ã‚‹æ°—ï¼š${student.motivation}<br>
         çµ†ï¼š${student.bond}<br>`;
}

// -------------------------------
// ã‚¤ãƒ™ãƒ³ãƒˆã‚¬ãƒãƒ£è¡¨ç¤º
// -------------------------------
function showEvent() {
    const ev = events[Math.floor(Math.random() * events.length)];
    const area = document.getElementById("eventArea");

    area.innerHTML = `<h2>ã‚¤ãƒ™ãƒ³ãƒˆï¼š${ev.name}</h2>`;

    ev.cards.forEach(card => {
        const div = document.createElement("div");
        div.className = "card";
        div.textContent = card.title;

        div.onclick = () => {
            applyEffect(card.effect);
            nextTurn();
        };

        area.appendChild(div);
    });
}

// -------------------------------
// åŠ¹æœé©ç”¨
// -------------------------------
function applyEffect(effect) {
    for (let key in effect) {
        student[key] += effect[key];
    }
}

// -------------------------------
// ã‚¿ãƒ¼ãƒ³é€²è¡Œ
// -------------------------------
function nextTurn() {
    turn++;
    seasonIndex = (seasonIndex + 1) % 4;
    document.getElementById("eventArea").innerHTML = "";

    if (turn > 10) {
        endGame();
    } else {
        updateStatus();
        showEvent();
    }
}

// -------------------------------
// ã‚²ãƒ¼ãƒ çµ‚äº†
// -------------------------------
function endGame() {
    let result = "ä¸åˆæ ¼â€¦";
    if (student.score >= 70 && student.motivation >= 40) {
        result = "ğŸ‰ã”ã†ãã‚“ã€åˆæ ¼ãŠã‚ã§ã¨ã†ï¼ï¼";
    }
    document.getElementById("eventArea").innerHTML =
        `<h2>æœ€çµ‚çµæœï¼š${result}</h2>`;
    document.getElementById("nextTurnBtn").style.display = "none";
}

// -------------------------------
// åˆæœŸåŒ–
// -------------------------------
document.getElementById("nextTurnBtn").onclick = () => {
    updateStatus();
    showEvent();
    document.getElementById("nextTurnBtn").style.display = "none";
};

updateStatus();

</script>

</body>
</html>

